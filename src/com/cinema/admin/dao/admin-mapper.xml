<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cinema.admin.dao.admin-mapper"> 
	<select id="adminMovieAllList" resultType="movie">
	 	SELECT mno,title,opendate,type,rank,movielike FROM movielist
	</select>
	<select id="RList" parameterType="java.util.Map" resultType="reservelist">
	 <![CDATA[
		SELECT rno,title,name,rdate,cancel,refund, num 
		FROM (SELECT rno,title,name,rdate,cancel,refund, ROWNUM as num 
		FROM (SELECT rno,title,name,rdate,cancel,refund 
		FROM reservelist NATURAL JOIN member NATURAL JOIN THEATERLIST NATURAL JOIN MOVIELIST ORDER BY RNO DESC))
		WHERE num BETWEEN #{start} AND #{end} 
	]]>  
	</select>
	<select id="RTotal" resultType="int">
		SELECT CEIL(COUNT(*)/10) FROM reservelist
	</select>
	<select id="RContent" resultType="reservelist">
		SELECT seat,ticket,payment,paytype,serverpay,shopid,cardoknum,theater,theaterno,movietime FROM reservelist NATURAL JOIN THEATERLIST WHERE rno=#{no}
	</select>
	<select id="adminMovieModify" parameterType="int" resultType="movie">
		SELECT poster,title,opendate,grade,genre,runtime,director,cast,content,trailer,type 
		FROM MOVIELIST WHERE mno=#{no}
	</select>
</mapper>